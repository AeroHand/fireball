function sendToWindows(a,b){var c=pluginToWindows[a];if(c&&c.length>0)for(var d=0;d<c.length;d++){var e=c[d];e&&e.sendToPage.apply(e,b)}else Fire.error("Unregistered plugin: %s",a)}var Ipc=require("ipc"),FireWindow=require("../fire-window"),RECV_PANEL_OPEN="plugin:panel:open",PluginWindowMgr=exports;pluginToWindows={},Ipc.on(RECV_PANEL_OPEN,function(a,b,c,d){var e=Fire.App.findWindow(b);e||(console.log("Open plugin window:",d),e=new FireWindow(b,c),e.load(d,c&&c.query),e.nativeWin.setMenuBarVisibility(!1),PluginWindowMgr.register(a,e)),e.focus()}),PluginWindowMgr.closeWindowsOfPlugin=function(a){var b=pluginToWindows[a];if(b){for(var c=0;c<b.length;c++){var d=b[c];d&&d.close()}delete pluginToWindows[a]}},PluginWindowMgr.register=function(a,b){var c=pluginToWindows[a];c?c.push(b):pluginToWindows[a]=[b]},PluginWindowMgr.getWindows=function(a){return pluginToWindows[a]||[]},PluginWindowMgr.sendToPlugin=function(){Fire.sendToWindows.apply(Fire,arguments)},Fire._PluginWindowMgr=PluginWindowMgr;