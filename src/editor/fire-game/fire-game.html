<html><head></head><body><polymer-element name="fire-game" constructor="FireGame" on-show="{{showAction}}" on-hide="{{hideAction}}" on-resize="{{resizeAction}}" on-mousedown="{{mousedownAction}}" assetpath=""><template><style>:host{display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;font-size:12px;white-space:nowrap;color:#ddd;background:#333;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;cursor:default}span.space{width:5px}span.text{margin-left:5px;margin-right:5px}fire-ui-select{width:180px}fire-ui-unit-input{width:60px}.border{border:1px solid #171717;position:relative;box-shadow:inset 0 0 10px 5px rgba(0,0,0,0.2);background:#292929}#view:focus{outline:0}canvas{margin:auto;position:absolute;top:0;left:0;bottom:0;right:0;display:block;}canvas:focus{outline:0}</style><fire-ui-toolbar><fire-ui-select id="resolutionOptions" value="{{curResolution}}"></fire-ui-select><span class="space"></span><fire-ui-checkbox value="{{rotate}}">Rotate</fire-ui-checkbox><span class="space"></span><fire-ui-unit-input disabled="{{curResolution!==1}}" value="{{customWidth}}" type="int" unit="w" min="0"></fire-ui-unit-input><span class="text">X</span><fire-ui-unit-input disabled="{{curResolution!==1}}" value="{{customHeight}}" type="int" unit="h" min="0"></fire-ui-unit-input><span class="space"></span></fire-ui-toolbar><div class="border" flex-1=""><div id="view" fit=""></div></div></template><script>!function(){var a=[{name:"Free Aspect",type:"free",value:[-1,-1]},{name:"Custom Size",type:"custom",value:[-1,-1]},{name:"Display (4:3)",type:"ratio",value:[4,3]},{name:"Display (16:9)",type:"ratio",value:[16,9]},{name:"iPhone 4 (640 x 960)",type:"fixed",value:[640,960]},{name:"iPhone 5 (640 x 1136)",type:"fixed",value:[640,1136]},{name:"iPhone 6 (750 x 1334)",type:"fixed",value:[750,1334]},{name:"iPhone 6 Plus (1242 x 2208)",type:"fixed",value:[1242,2208]}];Polymer("fire-game",{created:function(){this.icon=new Image,this.icon.src="fire://static/img/plugin-game.png",this.ipc=new Fire.IpcListener,this.renderContext=null,this.curResolution=0,this.rotate=!1,this.customWidth=640,this.customHeight=480},observe:{curResolution:"resize",rotate:"resize",customWidth:"resize",customHeight:"resize"},ready:function(){this.$.resolutionOptions.options=a.map(function(a,b){return{value:b,name:a.name}}),this.$.view.tabIndex=EditorUI.getParentTabIndex(this)+1},attached:function(){this.ipc.on("scene:dirty",this.delayRepaintScene.bind(this))},detached:function(){this.ipc.clear()},setRenderContext:function(a){null!==this.renderContext&&this.$.view.removeChild(this.renderContext.canvas),this.renderContext=a,null!==this.renderContext&&this.$.view.appendChild(this.renderContext.canvas)},resize:function(){if(this.renderContext){var b=this.style.display;this.style.display="";var c=[-1,-1],d=a[this.curResolution],e=this.$.view.getBoundingClientRect(),f,g,h;"fixed"===d.type?(this.rotate?(f=d.value[1],g=d.value[0]):(f=d.value[0],g=d.value[1]),c=Fire.fitSize(f,g,e.width,e.height)):"ratio"===d.type?(h=this.rotate?d.value[1]/d.value[0]:d.value[0]/d.value[1],c=Fire.fitRatio(h,e.width,e.height)):"custom"===d.type?(this.rotate?(f=this.customHeight,g=this.customWidth):(f=this.customWidth,g=this.customHeight),c=Fire.fitSize(f,g,e.width,e.height)):c=[this.$.view.clientWidth,this.$.view.clientHeight],this.renderContext.size=new Fire.Vec2(c[0],c[1]),this.style.display=b,this.repaintScene()}},repaintScene:function(){this.renderContext&&Fire.Engine._scene.render(this.renderContext)},delayRepaintScene:function(){this._repainting||(this._repainting=!0,setTimeout(function(){this.repaintScene(),this._repainting=!1}.bind(this),100))},showAction:function(a){this.repaintScene(),this._repaintID=setInterval(this.repaintScene.bind(this),500)},hideAction:function(a){clearInterval(this._repaintID)},resizeAction:function(a){this.resize()},mousedownAction:function(a){a.stopPropagation(),this.$.view.focus()}})}();</script></polymer-element></body></html>