<html><head></head><body><div hidden=""><polymer-element name="play-bar" constructor="PlayBar" assetpath="top-bar/play-bar/"><template><style>fire-ui-bi{font-size:16px;}fire-ui-bi::shadow .border{padding:0 15px;height:26px}</style><fire-ui-button-group id="group" multiple="multiple"><fire-ui-bi id="play" on-click="{{playAction}}"><i class="fa fa-play"></i></fire-ui-bi><fire-ui-bi id="pause" on-click="{{pauseAction}}"><i class="fa fa-pause"></i></fire-ui-bi><fire-ui-bi id="step" on-click="{{stepAction}}"><i class="fa fa-step-forward"></i></fire-ui-bi></fire-ui-button-group></template><script>!function(){Polymer("play-bar",{created:function(){this.ipc=new Fire.IpcListener},attached:function(){this.ipc.on("engine:played",this.onEnginePlayed.bind(this)),this.ipc.on("engine:stopped",this.onEngineStopped.bind(this)),this.ipc.on("engine:paused",this.onEnginePaused.bind(this))},detached:function(){this.ipc.clear()},onEnginePlayed:function(a){a?this.$.pause.active=!1:(this.$.play.active=!0,this.$.group.active=!0)},onEngineStopped:function(){this.$.play.active=!1,this.$.pause.active=!1,this.$.group.active=!1},onEnginePaused:function(){this.$.pause.active=!0},playAction:function(a){a.stopPropagation(),Fire.Engine.isPlaying?Fire._Sandbox.rewindScene(function(){Fire.Engine.stop()}):Fire._Sandbox.stashScene(function(){this.$.pause.active?Fire.Engine.step():Fire.Engine.play()}.bind(this))},pauseAction:function(a){a.stopPropagation(),Fire.Engine.isPlaying?Fire.Engine.isPaused?Fire.Engine.play():Fire.Engine.pause():this.$.pause.active=!this.$.pause.active},stepAction:function(a){a.stopPropagation(),Fire.Engine.isPlaying?Fire.Engine.step():Fire._Sandbox.stashScene(function(){Fire.Engine.step()})}})}();</script></polymer-element><polymer-element name="layout-tools" constructor="LayoutTools" assetpath="top-bar/layout-tools/"><template><style>:host{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:flex-end;position:relative;box-sizing:border-box}span.space{width:10px}#transform fire-ui-bi{font-size:14px;}#transform fire-ui-bi::shadow .border{padding:6px 12px}#transform fire-ui-bi[active]::shadow .border{color:#0a0}#coordinate fire-ui-bi{font-size:12px;}#coordinate fire-ui-bi::shadow .border{padding:0 10px;height:15px}#coordinate fire-ui-bi[active]::shadow .border{color:#aa0}#pivot fire-ui-bi{font-size:12px;}#pivot fire-ui-bi::shadow .border{padding:0 10px;height:15px}#pivot fire-ui-bi[active]::shadow .border{color:#a00}</style><fire-ui-button-group id="transform"><fire-ui-bi on-active="{{selectMove}}"><i class="fa fa-arrows"></i></fire-ui-bi><fire-ui-bi on-active="{{selectRotate}}"><i class="fa fa-rotate-left"></i></fire-ui-bi><fire-ui-bi on-active="{{selectScale}}"><i class="fa fa-expand"></i></fire-ui-bi></fire-ui-button-group><span class="space"></span><fire-ui-button-group id="coordinate"><fire-ui-bi on-active="{{selectLocal}}"><img src="img/tools-local.png"></fire-ui-bi><fire-ui-bi on-active="{{selectGlobal}}"><img src="img/tools-global.png"></fire-ui-bi></fire-ui-button-group><span class="space"></span><fire-ui-button-group id="pivot"><fire-ui-bi on-active="{{selectPivot}}"><img src="img/tools-pivot.png"></fire-ui-bi><fire-ui-bi on-active="{{selectCenter}}"><img src="img/tools-center.png"></fire-ui-bi></fire-ui-button-group></template><script>!function(){var a=["move","rotate","scale"],b=["local","global"],c=["pivot","center"];Polymer("layout-tools",{created:function(){this.handleID=0,this.coordinateID=0,this.pivotID=0},ready:function(){this.$.transform.select(0),this.$.coordinate.select(0),this.$.pivot.select(0)},selectMove:function(a){this.handleID=0,this.fire("layout-tools-changed")},selectRotate:function(a){this.handleID=1,this.fire("layout-tools-changed")},selectScale:function(a){this.handleID=2,this.fire("layout-tools-changed")},selectLocal:function(a){this.coordinateID=0,this.fire("layout-tools-changed")},selectGlobal:function(a){this.coordinateID=1,this.fire("layout-tools-changed")},selectPivot:function(a){this.pivotID=0,this.fire("layout-tools-changed")},selectCenter:function(a){this.pivotID=1,this.fire("layout-tools-changed")},settings:function(){return{handle:a[this.handleID],coordinate:b[this.coordinateID],pivot:c[this.pivotID]}}})}();</script></polymer-element><polymer-element name="top-bar" constructor="TopBar" assetpath="top-bar/"><template><style>:host{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch;position:relative;box-sizing:border-box;font-size:14px;height:30px;margin-bottom:5px;color:#aaa}.left{text-align:left;margin-left:5px;overflow:hidden}.center{text-align:center;align-items:flex-end}.right{text-align:right;margin-right:5px}img{box-sizing:border-box;height:30px;border:1px solid #171717}</style><span class="left" flex-1=""><layout-tools id="layoutTools"></layout-tools></span><span class="center" flex-row="" flex-1=""><span flex-1=""></span><play-bar></play-bar><span flex-1=""></span></span><span class="right" flex-1=""><img on-click="{{helpAction}}" src="img/help.jpg"></span><span class="right"><img src="img/avatar-placeholder.jpg"></span></template><script>!function(){Polymer("top-bar",{keySettings:null,helpAction:function(){this.keySettings?this.keySettings.show():(this.keySettings=new KeySettings,document.body.appendChild(this.keySettings))}})}();</script></polymer-element><polymer-element name="status-bar" constructor="StatusBar" assetpath="status-bar/"><template><style>:host{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;position:relative;box-sizing:border-box;font-size:12px;height:20px;margin:5px 5px 0;color:#aaa}.version{color:#f90}span{margin-right:5px}.watch.starting{color:#f90}.watch.on{color:#0f0}.watch.stopping{color:#f00}.watch.off{color:#555}.watch.unknown{color:#f00}.db.syncing{color:#f90}.db.normal{color:#555}.spinner-wave.spinner{display:none;margin:0 auto;height:30px;text-align:center;font-size:10px}.spinner-wave.spinner.spinner-show{display:block}.spinner-wave div{background-color:#f90;height:100%;width:2px;display:inline-block;-webkit-animation:stretchdelay .8s infinite ease-in-out}.spinner-wave .rect2{-webkit-animation-delay:-.7s}.spinner-wave .rect3{-webkit-animation-delay:-.6s}.spinner-wave .rect4{-webkit-animation-delay:-.5s}.spinner-wave .rect5{-webkit-animation-delay:-.4s}@-moz-keyframes stretchdelay{0%,40%,100%{-webkit-transform:scaleY(.2)}20%{-webkit-transform:scaleY(.6)}}@-webkit-keyframes stretchdelay{0%,40%,100%{-webkit-transform:scaleY(.2)}20%{-webkit-transform:scaleY(.6)}}@-o-keyframes stretchdelay{0%,40%,100%{-webkit-transform:scaleY(.2)}20%{-webkit-transform:scaleY(.6)}}@keyframes stretchdelay{0%,40%,100%{-webkit-transform:scaleY(.2)}20%{-webkit-transform:scaleY(.6)}}</style><span class="watch {{watchState.state}}"><i class="fa {{watchState.icon}}"></i></span><span class="db {{dbState.state}}">{{dbState.state}}</span><div class="spinner spinner-wave {{showSyncingWave ? 'spinner-show' : ''}}"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div><span flex-1=""></span><span class="version">Fireball v{{version}}</span></template><script>!function(){var a=require("remote"),b={"start-watching":{state:"starting",text:"Start Watching",icon:"fa-eye"},"watch-on":{state:"on",text:"Watching",icon:"fa-eye"},"stop-watching":{state:"stopping",text:"Stop Watching",icon:"fa-eye-slash"},"watch-off":{state:"off",text:"Sleep",icon:"fa-eye-slash"},unknown:{state:"unknown",text:"Unknown",icon:"fa-eye-slash"}};Polymer("status-bar",{created:function(){this.ipc=new Fire.IpcListener,this.version=a.getGlobal("FIRE_VER"),this.watchState=b["watch-off"],this.dbState={state:"normal",task:"none"},this.showSyncingWave=!1,this._syncingTimeout=null},attached:function(){this.ipc.on("asset-db:watch-changed",function(a){var c=a.state,d=b[c];return d?void(this.watchState=d):void(this.watchState=b.unknown)}.bind(this)),this.ipc.on("asset-db:syncing",function(a){var b=a.taskName;this.dbState={state:"syncing",task:b},null===this._syncingTimeout&&(this._syncingTimeout=setTimeout(function(){this.showSyncingWave=!0}.bind(this),500))}.bind(this)),this.ipc.on("asset-db:synced",function(){this.dbState={state:"normal",task:"none"},this.showSyncingWave=!1,this._syncingTimeout&&(clearTimeout(this._syncingTimeout),this._syncingTimeout=null)}.bind(this))},detached:function(){this.ipc.clear()}})}();</script></polymer-element><polymer-element name="map-sections" constructor="MapSections" assetpath="key-settings/"><template><style>.item { padding-left: 15px; padding-right: 15px; width: 100%; height: auto; color: rgb(58,58,58); font-size: 14px; margin-top: 10px; }</style><template repeat="{{item in items}}"><div flex-row="" class="item"><span flex-1="">{{item.keys | platform}}</span><span flex-2="">{{item.discription | platform}}</span></div></template></template><script>!function(){Polymer("map-sections",{publish:{items:[]},platform:function(a){return Fire.isDarwin||(a=a.replace("⌘","Ctrl").replace("⇧","Shift").replace("⌥","Alt")),a}})}();</script></polymer-element><polymer-element name="key-settings" constructor="KeySettings" assetpath="key-settings/"><template><style>:host{z-index:999;background:#3a3a3a;position:absolute;left:50%;width:400px;max-height:600px;margin-left:-185px;font-family:Helvetica,Arial,sans-serif;top:50%;margin-top:-300px;box-shadow:0 0 8px 8px rgba(0,0,0,0.2);border-radius:3px;border:1px solid #1e1e1e;border-top:1px solid #464646;color:#bebebe;}:host .topbar{width:100%;float:left;height:45px;border-bottom:1px solid #464646;}:host .topbar span{margin:0;padding:0;margin-left:10px;line-height:45px}:host .topbar fire-ui-button{float:right;margin-top:10px;margin-right:10px}:host .scroll{width:100%;height:auto;max-height:554px;overflow-y:scroll;overflow-x:hidden;float:left}:host .content{width:395px;height:auto;padding-bottom:20px;float:left;background:#e9e9e9;}:host .content .title{width:380px;margin:10px;color:#000;height:20px;margin-top:30px;line-height:10px;float:left;border-bottom:1px solid #808080}</style><div class="topbar"><span>Keyboard Shortcuts</span><fire-ui-button on-click="{{closeAction}}">Close</fire-ui-button></div><div class="scroll"><div class="content"><template repeat="{{ item in hotKeys}}"><span class="title">{{item.name}}</span><map-sections items="{{item.value}}"></map-sections></template></div></div></template><script>!function(){Polymer("key-settings",{publish:{hide:!1,hotKeys:[{name:"File",value:[{keys:"⌘+N",discription:"Creat New Scene"},{keys:"⌘+S",discription:"Save Scene"},{keys:"⌘+B",discription:"Build"}]},{name:"Edit",value:[{keys:"⌘+Z",discription:"Undo"},{keys:"⇧+⌘+Z",discription:"Redo"},{keys:"⌘+X",discription:"Cut"},{keys:"⌘+C",discription:"Copy"},{keys:"⌘+V",discription:"Paste"},{keys:"⌘+A",discription:"Select All"}]},{name:"Window",value:[{keys:"⌘+M",discription:"Minimize"},{keys:"⌘+W",discription:"Close"}]},{name:"Developer",value:[{keys:"⌘+R",discription:"Reload"},{keys:"F7",discription:"Recompile"},{keys:"⌥+⌘+I",discription:"Developer Tools"}]},{name:"Code-Editor",value:[{keys:"Tab",discription:"缩进"},{keys:"⌘+C",discription:"Copy"},{keys:"⌘+V",discription:"Paste"},{keys:"⌘+X",discription:"Cut"},{keys:"⌘+Z",discription:"Undo"},{keys:"⇧+⌘+Z",discription:"Redo"},{keys:"⌘+/",discription:"注释选中内容"},{keys:"⌘+O",discription:"Auto Formating"},{keys:"⌘+S",discription:"Save"},{keys:"⌘+R",discription:"Reload File"},{keys:"⌘+[",discription:"向左移动选中行"},{keys:"⌘+]",discription:"向右移动选中行"},{keys:"⌘+KU",discription:"改为大写"},{keys:"⌘+L",discription:"选择整行(按住-继续选择下行)"},{keys:"⌘+J",discription:"合并选中行"}]}]},ready:function(){this.span=document.createElement("div"),this.span.style.width="100%",this.span.style.height="100%",this.span.style.position="absolute",this.span.style.opacity=.5,this.span.style.zIndex=998,this.span.style.background="black",document.body.appendChild(this.span),this.span.onclick=function(){this.closeAction()}.bind(this)},hideChanged:function(){this.hide?(this.span.style.display="none",this.style.display="none"):(this.span.style.display="block",this.style.display="block")},show:function(){this.hide=!1},closeAction:function(){this.hide=!this.hide}})}();</script></polymer-element></div><polymer-element name="main-window" constructor="MainWindow" assetpath=""><template><style>:host{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;margin:3px;font-size:12px;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;color:#ddd}span.space{width:3px;height:3px}</style><span class="space"></span><top-bar id="toolbar" on-layout-tools-changed="{{layoutToolsAction}}"></top-bar><fire-ui-dock id="mainDock" flex-1="" row="" no-collapse=""><fire-ui-dock width="200" min-width="200"><fire-ui-panel id="hierarchyPanel" height="300"></fire-ui-panel><fire-ui-panel id="assetsPanel"></fire-ui-panel></fire-ui-dock><fire-ui-panel id="inspectorPanel" width="300" min-width="240"></fire-ui-panel><fire-ui-dock><fire-ui-panel id="editPanel" auto-layout="" style=""></fire-ui-panel><fire-ui-panel id="consolePanel" height="200"></fire-ui-panel></fire-ui-dock></fire-ui-dock><status-bar id="status"></status-bar></template><script>!function(){var a=require("remote"),b=require("async"),c=require("fire-url"),d=require("fire-path");Polymer("main-window",{_scriptsLoaded:!1,created:function(){Fire.mainWindow=this,this.settings={handle:"move",coordinate:"local",pivot:"pivot"},this.sceneInfo={},this.sceneNameObserver=null,this.ipc=new Fire.IpcListener,this._updateSceneIntervalID=null,this._updateSceneAnimFrameID=null,this._newsceneUrl=null},ready:function(){window.onbeforeunload=function(a){var b=this.confirmCloseScene();switch(b){case 0:return this.saveCurrentScene(),Fire.Metrics.trackEditorClose(),!0;case 1:return!1;case 2:return Fire.Metrics.trackEditorClose(),!0}}.bind(this),window.addEventListener("resize",function(){this.$.mainDock._notifyResize()}.bind(this)),window.addEventListener("start-unload-scene",function(a){Fire.Engine.isPlaying||this._stopSceneInterval()}.bind(this)),window.addEventListener("engine-stopped",function(a){this._stopSceneInAnimationFrame()}.bind(this))},attached:function(){this.ipc.on("project:ready",this.init.bind(this)),this.ipc.on("reload:window-scripts",function(a){Fire._Sandbox.reloadScripts(a,function(){this._scriptsLoaded=!0}.bind(this))}.bind(this)),this.ipc.on("asset-library:debugger:query-uuid-asset",function(){var a=[];for(var b in Fire.AssetLibrary._uuidToAsset){var c=Fire.AssetLibrary._uuidToAsset[b];a.push({uuid:b,name:c.name,type:Fire.JS.getClassName(c)})}Fire.sendToAll("asset-library:debugger:uuid-asset-results",{results:a})}.bind(this)),this.ipc.on("asset:moved",function(a){var b=a.uuid,c=a["dest-url"];b===Fire.Engine._scene._uuid&&this.updateTitle()}.bind(this)),this.ipc.on("scene:save",this.saveCurrentScene.bind(this)),this.ipc.on("asset:saved",function(a){var b=a.url,d=a.uuid;if(this._newsceneUrl===b){this._newsceneUrl=null;var e=c.basename(b);Fire.Engine._scene._uuid=d,Fire.Engine._scene.name=e,this.setSceneDirty(!1,!0)}}.bind(this)),this.ipc.on("asset:open",function(a){var b=a.uuid,d=a.url;if(".fire"===c.extname(d)){var e=this.confirmCloseScene();switch(e){case 0:this.saveCurrentScene(),b!==Fire.Engine._scene._uuid&&Fire.sendToMainWindow("engine:open-scene",{uuid:b});break;case 1:break;case 2:Fire.sendToMainWindow("engine:open-scene",{uuid:b})}}}.bind(this)),this.ipc.on("entity:added",this.setSceneDirty.bind(this,!0,!1)),this.ipc.on("entity:removed",this.setSceneDirty.bind(this,!0,!1)),this.ipc.on("entity:parentChanged",this.setSceneDirty.bind(this,!0,!1)),this.ipc.on("entity:indexChanged",this.setSceneDirty.bind(this,!0,!1)),this.ipc.on("entity:renamed",this.setSceneDirty.bind(this,!0,!1)),this.ipc.on("entity:inspector-dirty",this.setSceneDirty.bind(this,!0,!1)),this.ipc.on("gizmos:dirty",this.setSceneDirty.bind(this,!0,!1)),this.ipc.on("scene:new",function(a){this.newScene()}.bind(this)),this.ipc.on("scene:launched",function(a){return this.$.scene.initSceneCamera(),this.$.game.resize(),Fire.Engine.isPlaying?void 0:this._updateSceneIntervalID?void Fire.warn("The _updateSceneInterval still ON"):void this._updateSceneInterval()}.bind(this)),this.ipc.on("engine:played",function(a){return a?void 0:this._updateSceneAnimFrameID?void Fire.warn("The _updateSceneInAnimationFrame still ON"):void this._updateSceneInAnimationFrame()}.bind(this))},detached:function(){this.ipc.clear()},domReady:function(){Fire.PanelMng.root=this.$.mainDock,Fire.sendToCore("project:init")},init:function(){var a=this;b.series([function(b){Polymer["import"](["fire://src/editor/fire-assets/fire-assets.html","fire://src/editor/fire-hierarchy/fire-hierarchy.html","fire://src/editor/fire-inspector/fire-inspector.html","fire://src/editor/fire-console/fire-console.html","fire://src/editor/fire-scene/fire-scene.html","fire://src/editor/fire-game/fire-game.html"],function(){a.addPlugin(a.$.hierarchyPanel,FireHierarchy,"hierarchy","Hierarchy"),a.addPlugin(a.$.assetsPanel,FireAssets,"assets","Assets"),a.addPlugin(a.$.inspectorPanel,FireInspector,"inspector","Inspector"),a.addPlugin(a.$.consolePanel,FireConsole,"console","Console"),a.addPlugin(a.$.editPanel,FireScene,"scene","Scene"),a.addPlugin(a.$.editPanel,FireGame,"game","Game");for(var c in Fire.plugins){var d=Fire.plugins[c];d.init&&d.init()}Fire.sendToCore("window:save-layout",Fire.PanelMng.getLayout(),Fire.RequireIpcEvent),b()})},function(b){Fire.sendToCore("compiler:compile-and-reload");var c=setInterval(function(){a._scriptsLoaded&&(clearInterval(c),b())},100)},function(b){Fire.info("asset-library initializing..."),Fire.AssetLibrary.init("library://");var d=Fire.JS._getClassId(Fire._Scene);Fire.AssetDB.query("assets://",{"type-id":d},function(d){for(var e=0;e<d.length;++e){var f=d[e],g=c.basenameNoExt(f.url);a.sceneInfo[f.uuid]=f.url,Fire.Engine._sceneInfos[g]=f.uuid}b()})},function(b){Fire.info("fire-engine initializing...");var c=Fire.Engine.init(a.$.game.$.view.clientWidth,a.$.game.$.view.clientHeight);a.$.game.setRenderContext(c),a.$.scene.initRenderContext();var d=null;null===d&&a.newScene(),Fire.Metrics.trackEditorOpen(),b()}],function(a){a&&Fire.error(a.message)})},layoutToolsAction:function(a){var b=this.$.toolbar.$.layoutTools.settings();Fire.JS.mixin(this.settings,b),this.$.scene.fire("layout-tools-changed"),a.stopPropagation()},setSceneDirty:function(a,b){var c=b;Fire.Engine._scene.dirty!==a&&(Fire.Engine._scene.dirty=a,c=!0),c&&this.updateTitle()},updateTitle:function(){setImmediate(function(){var b=Fire.AssetDB.uuidToUrl(Fire.Engine._scene._uuid);b||(b="Untitled"),b+=Fire.Engine._scene.dirty?"*":"";var c=a.getCurrentWindow();c.setTitle("Fireball Editor - "+b),c.setDocumentEdited(Fire.Engine._scene.dirty)}.bind(this))},addPlugin:function(a,b,c,d){var e=new b;e.setAttribute("id",c),e.setAttribute("name",d),e.setAttribute("fit",""),this.$[c]=e,a.add(e),a.$.tabs.select(0)},newScene:function(){Fire.Engine._setCurrentScene(new Fire._Scene);var a=new Fire.Entity("Main Camera");a.addComponent(Fire.Camera)},confirmCloseScene:function(){if(Fire.Engine._scene&&Fire.Engine._scene.dirty){var b=a.require("dialog");return b.showMessageBox(a.getCurrentWindow(),{type:"warning",buttons:["Save","Cancel","Don't Save"],title:"Save Scene Confirm",message:Fire.AssetDB.uuidToUrl(Fire.Engine._scene._uuid)+" has changed, do you want to save it?",detail:"Your changes will be lost if you close this item without saving."})}return 2},saveCurrentScene:function(){var b=Fire.Engine._scene,c=a.require("dialog"),e=Fire.AssetDB.uuidToUrl(b._uuid);if(!e){var f=Fire.AssetDB._fspath("assets://"),g=c.showSaveDialog(a.getCurrentWindow(),{title:"Save Scene",defaultPath:f,filters:[{name:"Scenes",extensions:["fire"]}]});g&&(d.contains(f,g)?e="assets://"+d.relative(f,g):(c.showMessageBox(a.getCurrentWindow(),{type:"warning",buttons:["OK"],title:"Warning",message:"Warning: please save the scene in the assets folder.",detail:"The scene needs to be saved inside the assets folder of your project."}),this.saveCurrentScene()))}e&&(this._newsceneUrl=e,Fire.AssetDB.save(this._newsceneUrl,Fire.serialize(b)))},_updateSceneInterval:function(){this._updateSceneIntervalID=setInterval(function(){this.$.scene.repaintScene()}.bind(this),500)},_stopSceneInterval:function(){this._updateSceneIntervalID&&(clearInterval(this._updateSceneIntervalID),this._updateSceneIntervalID=null)},_updateSceneInAnimationFrame:function(){this._updateSceneAnimFrameID=window.requestAnimationFrame(function(){this.$.scene.repaintScene(),this._updateSceneInAnimationFrame()}.bind(this))},_stopSceneInAnimationFrame:function(){this._updateSceneAnimFrameID&&(window.cancelAnimationFrame(this._updateSceneAnimFrameID),this._updateSceneAnimFrameID=null)}})}();</script></polymer-element></body></html>