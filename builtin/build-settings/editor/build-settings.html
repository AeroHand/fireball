<html><head></head><body><polymer-element name="build-settings" constructor="BuildSettings" on-query-scene-results="ipcQuerySceneResults" assetpath=""><template><style>:host{color:#ddd;background:#303030;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif}.title{width:100%;float:left;background-color:#242424;font-size:18px;line-height:40px;padding-left:15px;border-bottom:1px solid #424242;}.title h2{margin-top:10px;margin-bottom:10px;float:left}.title .tip{color:#f00;font-size:12px;padding-left:100px;display:none;line-height:60px;float:left}.section{width:100%;height:auto;float:left}.prop{height:24px;margin-left:15px;margin-top:10px;margin-right:15px;padding-bottom:10px;border-bottom:1px solid #282828;}.prop fire-ui-label{font-size:13px}.item-box{height:100px;max-height:100px;overflow:hidden;margin-top:5px}.border{border:1px solid #999;position:absolute;max-height:100px;left:191px;width:296px}.items{min-height:80px;overflow-x:hidden;overflow-y:auto;}.items fire-ui-checkbox{margin:3px}.box-border{min-height:80px;border:1px solid #999}.link{font-size:12px;-webkit-user-select:initial;text-decoration:underline;cursor:pointer;}.link:hover{color:#0c90e6}.btn-group{width:100%;height:auto;float:left;margin-top:12px;margin-bottom:5px;}.btn-group button{float:right;width:80px;height:30px;margin-right:15px;border:1px solid #252525;border-radius:2px;padding:4px 8px;cursor:pointer;color:#bdbdbd;}.btn-group button li{font-size:20px;cursor:pointer;color:#fff}.btn-group button:focus{outline:none}.btn-group button.green{background-color:#090;}.btn-group button.green:hover{background-color:#00bd00}.btn-group button.green:active{background-color:#008a00}.btn-group button.red{background-color:#900;}.btn-group button.red:hover{background-color:#bd0000}.btn-group button.red:active{background-color:#8a0000}.btn-group .hide{display:none}fire-ui-label{text-align:right;margin-right:20px}</style><div class="title"><h2>Build Settings</h2><span class="tip" id="tip">
            Please enter the correct data!
        </span></div><div class="section"><div flex-row="" class="prop"><fire-ui-label flex-1="">Project Name</fire-ui-label><fire-ui-text-input value="{{settings.projectName}}" invalid="{{!isProjectNameValid}}" placeholder="Project Name" flex-2=""></fire-ui-text-input></div><div flex-row="" class="prop"><fire-ui-label flex-1="">Platform</fire-ui-label><fire-ui-select flex-2="" value="{{settings.platform}}" options="{{platformList}}"></fire-ui-select></div><div flex-row="" class="prop"><fire-ui-label flex-1="">Build Path</fire-ui-label><div flex-row="" flex-2=""><fire-ui-text-input value="{{settings.buildPath}}" invalid="{{!isBuildPathValid}}" placeholder="Building Path" flex-4=""></fire-ui-text-input><fire-ui-button style="margin-left: 5px" on-click="{{chooseDistPath}}">Open...</fire-ui-button><fire-ui-button style="margin-left: 5px" on-click="{{showInFinder}}">Show in {{!Fire.isDarwin ? 'Finder':'Explorer'}}</fire-ui-button></div></div><div flex-row="" class="prop"><fire-ui-label id="test" flex-1="">Start Scene</fire-ui-label><fire-ui-select flex-2="" value="{{settings.defaultScene}}" options="{{settings.sceneList}}"></fire-ui-select></div><div flex-row="" class="prop item-box"><fire-ui-label flex-1="">Scenes In Build</fire-ui-label><div flex-2="" class="items"><div class="box-border"><template repeat="{{item in settings.sceneList}}"><fire-ui-checkbox disabled="{{item.value == settings.defaultScene}}" on-click="{{itemClickAction}}" value="{{item.checked}}" id="{{item.value}}">{{item.name}}</fire-ui-checkbox></template></div></div></div><div flex-row="" class="prop"><fire-ui-label flex-1="">Debug Mode</fire-ui-label><fire-ui-checkbox flex-2="" value="{{settings.isDebug}}"></fire-ui-checkbox></div><div flex-row="" class="prop"><fire-ui-label flex-1="">Preview</fire-ui-label><div flex-row="" flex-2=""><span class="link" flex-4="" on-click="{{previewAction}}">http://localhost:7456</span><fire-ui-button on-click="{{previewAction}}">Open in Browser</fire-ui-button></div></div></div><div class="btn-group"><button class="green" on-mouseenter="{{buildButtonHoverInAction}}" on-mouseleave="{{buildButtonHoverOutAction}}" on-click="{{buildAction}}"><span class="{{hoverBuildButton? 'hide':''}}">Build</span><li class="fa fa-download {{!hoverBuildButton? 'hide':''}}"></li></button><button class="red" on-click="{{closeAction}}">Close</button></div></template><script>!function(){var a=require("remote"),b=require("fire-url"),c=require("fire-fs"),d=require("fire-path"),e=a.require("shell");Polymer("build-settings",{platformList:[{name:"Web Mobile",value:"web-mobile"},{name:"Web Desktop",value:"web-desktop"}],observe:{"settings.projectName":"projectNameChanged","settings.defaultScene":"defaultSceneChanged","settings.platform":"platformChanged","settings.isDebug":"isDebugChanged","settings.buildPath":"buildPathChanged"},isProjectNameValid:!0,isBuildPathValid:!0,hoverBuildButton:!1,created:function(){var b=a.getGlobal("FIRE_PROJECT_PATH"),c=d.basename(b);this.settings={projectName:c,defaultScene:"",sceneList:[],isDebug:!0,platform:"web-mobile",buildPath:d.join(b,"mobile-"+c)}},domReady:function(){Fire.sendToCore("build-settings:query-scenes")},ipcQuerySceneResults:function(a){var b=a.detail.results;this.settings.sceneList=b.map(function(a){return{name:a.url,value:a.uuid,checked:!0}}),-1===this.settings.sceneList.indexOf(this.settings.defaultScene)&&(this.settings.defaultScene=this.settings.sceneList[0].value),this.settings.save()},defaultSceneChanged:function(){for(var a=0;a<this.settings.sceneList.length;++a)this.settings.sceneList[a].value===this.settings.defaultScene&&(this.settings.sceneList[a].checked=!0);this.settings.save()},buildPathChanged:function(){return this.settings.save(),this.settings.buildPath?void(this.isBuildPathValid=!0):void(this.isBuildPathValid=!1)},projectNameChanged:function(){return this.settings.save(),this.settings.projectName?void(this.isProjectNameValid=!0):void(this.isProjectNameValid=!1)},platformChanged:function(){var b=a.getGlobal("FIRE_PROJECT_PATH");this.settings.buildPath="web-mobile"===this.settings.platform?b+"/mobile-"+this.settings.projectName:b+"/desktop-"+this.settings.projectName,this.settings.save()},isDebugChanged:function(){this.settings.save()},chooseDistPath:function(){var b=a.require("dialog"),c=a.getGlobal("FIRE_PROJECT_PATH");b.showOpenDialog({defaultPath:c,properties:["openDirectory"]},function(a){a&&(this.settings.buildPath="web-mobile"===this.settings.platform?a+"/mobile-"+d.basename(c):a+"/desktop-"+d.basename(c))}.bind(this))},buildAction:function(){if(this.isProjectNameValid&&this.isBuildPathValid){this.$.tip.style.display="none";var a=this.settings.sceneList.filter(function(a){return a.checked}).map(function(a){return a.value}),b=a.indexOf(this.settings.defaultScene),c=a[0];a[0]=a[b],a[b]=c,Fire.sendToCore("build-project",this.settings.platform,this.settings.buildPath,a,this.settings)}else this.$.tip.style.display="block",this.$.tip.animate([{color:"white"},{color:"red"},{color:"white"},{color:"red"}],{duration:300})},buildButtonHoverInAction:function(a){this.hoverBuildButton=!0},buildButtonHoverOutAction:function(){this.hoverBuildButton=!1},previewAction:function(){e.openExternal("http://localhost:7456"),e.beep()},showInFinder:function(){return c.existsSync(this.settings.buildPath)?(e.showItemInFolder(d.normalize(this.settings.buildPath)),void e.beep()):void Fire.warn("%s not exists!",this.settings.buildPath)},closeAction:function(){window.close()}})}();</script></polymer-element></body></html>